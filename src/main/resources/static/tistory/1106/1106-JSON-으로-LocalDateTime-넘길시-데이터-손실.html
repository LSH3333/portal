
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>JSON 으로 LocalDateTime 넘길시 데이터 손실</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">JSON 으로 LocalDateTime 넘길시 데이터 손실</h2>
                                <div class="box-info">
                                    <p class="category">Web</p>
                                    <p class="date">2023-04-16 11:21:56</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p data-ke-size="size16">클라이언트에서 오브젝트를 스프링 컨트롤러를 넘겼는데 LocalDateTime 의 초(second) 부분의 손실이 발생했다.</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="background-color: #f7f7f8; color: #374151; text-align: start;">However, when converting a </span>LocalDateTime<span style="background-color: #f7f7f8; color: #374151; text-align: start;"> object to a format that can be sent over the network, such as JSON or XML, the serialization process may not preserve the full precision of the second component, resulting in loss of data.</span></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="background-color: #f7f7f8; color: #374151; text-align: start;">This is because JSON does not have a built-in data type for representing fractions of a second, and many JSON libraries serialize Java </span>LocalDateTime<span style="background-color: #f7f7f8; color: #374151; text-align: start;"> objects to conform to the JSON specification.</span></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">결론은 간단히 말하면 JSON 은 1초 이하 (나노,밀리 세컨드 등) 를 표현하지 못하기 때문에 손실이 발생한다.</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><b>해결법</b></p>
<pre class="css" style="background-color: #2b2b2b; color: #a9b7c6;"><code>@DateTimeFormat(pattern = "yyyy-MM-dd'T'HH:mm:ss.SSS")
private LocalDateTime createdTime;</code></pre>
<p data-ke-size="size16">이런식으로 스프링이 제공하는 @DateTimeFormat 으로 포맷을 지정해주면 스프링이 알아서 처리해준다.</p>
                        </div>
                        <br/>
                        <div class="tags">
                            #Spring 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
